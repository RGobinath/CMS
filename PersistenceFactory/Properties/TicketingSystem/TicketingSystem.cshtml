@model TIPS.Entities.TicketingSystem.TicketSystem
@{
    ViewBag.Title = "";
    Layout = "~/Views/Shared/NewAceMaster.cshtml";           
}
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8" />
<meta name="description" content="Dynamic tables and grids using jqGrid plugin" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<!-- #section:basics/navbar.layout -->
<!-- /section:basics/navbar.layout -->
<script type="text/javascript">
    try { ace.settings.check('main-container', 'fixed') } catch (e) { }
</script>
@using (Html.BeginForm("SaveTicketSystem", "TicketingSystem", FormMethod.Post, new { id = "innerForm", enctype = "multipart/form-data" }))
{
    <div class="page-content">
        <!-- /section:settings.box -->
        <div class="page-content-area">
            <span>@Html.Raw(ViewBag.BreadCrumb)</span>
            <div class="space-2">
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="col-sm-4">
                        <div class="row">
                            <div class="col-xs-12 widget-container-col">
                                <div class="widget-box widget-color-CustomizeBlue">
                                    <div class="widget-header widget-header-flat widget-header-small"  style="margin-bottom: 4px;">
                                        <div class="PanelHeader">
                                            <i class="ace-icon fa fa-search"></i>&nbsp;E-Ticket Details</div>
                                        <div class="widget-toolbar">
                                            <a data-action="collapse" href="#"><i class="1 ace-icon fa fa-chevron-down fa-6x"></i>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="widget-body">
                                        <div class="widget-main no-padding">
                                            <div class="row">
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Ticket No</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.TextBox("TicketNo", null, new { @class = "form-control input-sm", style = "border: none;background: transparent", @Readonly = "Readonly" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Reporter</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.TextBox("Reporter", null, new { @class = "form-control input-sm", style = "border: none;background: transparent", @Readonly = "Readonly" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Created Date</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.TextBox("CreatedDate", null, new { @class = "form-control input-sm", style = "border: none;background: transparent", @Readonly = "Readonly" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Activity Name</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.TextBox("ActivityFullName", null, new { @class = "form-control input-sm", style = "border: none;background: transparent", @Readonly = "Readonly" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Activity Status</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.TextBox("Status", null, new { @class = "form-control input-sm", @Readonly = "Readonly" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Ticket Type</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.DropDownList("ddTicketType", new SelectList(ViewBag.ddTicketType, "Value", "Text"), "Select", new { @Class = "form-control select-sm" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Module</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.DropDownList("ddModule", new SelectList(ViewBag.ddModule, "Value", "Text"), "Select", new { @Class = "form-control select-sm" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Priority</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.DropDownList("ddPriority", new SelectList(ViewBag.ddPriority, "Value", "Text"), "Select", new { @Class = "form-control select-sm" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Ticket Status</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.DropDownList("ddTicketStatus", new SelectList(ViewBag.ddTicketStatus, "Value", "Text"), "Select", new { @Class = "form-control select-sm" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @*<input type="button" id="btnTicketStatus" value="Update Status" name="Update Status" />*@
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Assigned To</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.DropDownList("ddAssignedTo", new SelectList(ViewBag.ddAssignedTo, "Text", "Text"), "Select", new { @Class = "form-control select-sm" })
                                                        <button type="button" id="btnAssign">
                                                            Assign
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-4">
                                                        <label for="form-field-select-1">
                                                            <b>Summary</b></label>
                                                    </div>
                                                    <div class="col-sm-8">
                                                        @Html.TextArea("Summary", new { rows = 3, cols = 45, @class = "form-control input-sm", @maxlength = "4000", @tabindex = "8" })
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    @if (Model.Id > 0 && ViewBag.activityName != "LogETicket")
                                                    {
                                                        <div class="col-sm-4">
                                                            <label for="form-field-select-1">
                                                                <b>Comments</b></label>
                                                        </div>
                                                        <div class="col-sm-8">
                                                            @Html.TextArea("Comments", new { rows = 3, cols = 45, @class = "form-control input-sm", @maxlength = "4000", @tabindex = "5" })
                                                        </div>
                                                    }
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-12">
                                                        @if (Model.Id == 0 && ViewBag.activityName == "LogETicket")
                                                        {
                                                            <button class="btn btn-grey btn-xs radius-4 btn-block btn-sm" type="submit" id="btnSave">
                                                                Save
                                                            </button>
                                                        }
                                                        else
                                                        {
                                                            if (ViewBag.activityName == "ResolveETicket" || ViewBag.activityName == "CloseETicket")
                                                            {
                                                            <button class="btn btn-danger btn-block btn-sm" type="submit" id="btnReject">
                                                                Reject
                                                            </button>
                                                            }
                                                            if (ViewBag.activityName == "CompleteETicket")
                                                            {
                                                            <button class="btn btn-success btn-block btn-sm" type="submit" id="btnReopen">
                                                                Reopen
                                                            </button>
                                                            }
                                                            <button class="btn btn-success btn-block btn-sm" type="submit" id="btnComplete">
                                                                Complete
                                                            </button>
                                                        }
                                                    </div>
                                                </div>
                                                <div class="col-xs-12" style="margin-bottom: 4px;">
                                                    <div class="col-sm-12">
                                                        <button type="button" class="btn btn-warning btn-block btn-sm" id="btnbkInbox" name="Back to Inbox">
                                                            Back to Inbox</button>
                                                        &nbsp;&nbsp;&nbsp;
                                                        <button type="button" class="btn btn-warning btn-block btn-sm" id="btnbkToAvailable" name="btnbkToAvailable">
                                                            Move Back to Available</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8" id="JqGrid">
                        <div class="row">
                            <div class=" col-xs-12">
                                <table id="NoteList">
                                </table>
                                <div id="NotePage">
                                </div>
                            </div>
                        </div>
                        @if (Model.Id > 0 && ViewBag.activityName != "LogETicket")
                        {
                            <div class="row">
                                <div class="col-xs-12">
                                    <table id="CommentList">
                                    </table>
                                    <div id="CommentListPage">
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="row">
                            <div class="col-xs-12">
                                @Html.Partial("DocLibrary")
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                @Html.Hidden("Id")
                                @Html.Hidden("InstanceId")
                                @Html.Hidden("loggedInUserId")
                                @Html.Hidden("loggedInUserType")
                                @Html.Hidden("loggedInUserName")
                                @Html.Hidden("isrejction")
                                @Html.Hidden("AlrtDskMsg", TempData["AlrtDskMsg"])
                                @Html.Hidden("activityName")
                                @Html.Hidden("ActivityId")
                                @Html.Hidden("TicketType")
                                @Html.Hidden("Module")
                                @Html.Hidden("Priority")
                                @Html.Hidden("TicketStatus")
                                @Html.Hidden("AssignedTo")
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<script src='@Url.Content("/Scripts/TicketingSystem/TicketingSystem.js")' type="text/javascript"></script>
<script type="text/javascript">    window.jQuery || document.write("<script src='../assets/js/jquery.min.js'>" + "<" + "/script>"); </script>
<script type="text/javascript">    if ('ontouchstart' in document.documentElement) document.write("<script src='../assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>"); </script>